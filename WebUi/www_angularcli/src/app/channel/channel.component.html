<div class="channel">
  <div class="row channel-header" data-toggle="collapse" [attr.data-target]="'#' + info.Number" aria-expanded="false" (click)="isCollapsed = !isCollapsed">
    <h3 class="left">{{info.Number}}: {{info.Name}}<span *ngIf="loading" class="fa fa-spinner fa-spin"></span></h3>
    <div class="right tags">
      <div class="right">
        <a class="glyphicon glyphicon-chevron-up"
           [class.glyphicon-chevron-up]="isCollapsed"
           [class.glyphicon-chevron-down]="!isCollapsed">
        </a>
      </div>
      <div *ngIf="info.EpgGrabber" class="tag">EPG</div>
      <div *ngIf="info.Keyblock" class="tag">Keyblock</div>
      <div *ngIf="info.TvHeadend" class="tag">TvHeadend</div>
    </div>
  </div>
  <div class="row channel-details collapse" [id]="info.Number">
    <div class="row">
      <app-toggle-button class="col-md-2" [text]="'EPG'" [value]="info.EpgGrabber" (onChanged)="onToggleButtonChange('EPG', $event)"></app-toggle-button>
      <app-toggle-button class="col-md-3" [text]="'Keyblock'" [value]="info.Keyblock" (onChanged)="onToggleButtonChange('Keyblock', $event)"></app-toggle-button>
      <app-toggle-button class="col-md-3" [text]="'TvHeadend'" [value]="info.TvHeadend" (onChanged)="onToggleButtonChange('TvHeadend', $event)"></app-toggle-button>
      <div *ngIf="info.TvHeadend && !TvHeadendLoading">
        <select [(ngModel)]="info.TvHeadendChannel">
          <option *ngFor="let ch of info.AvailableChannels" [value]="ch.Url">
            <span *ngIf="ch.Name">{{ch.Name}}: </span><span>{{ch.Url}}</span>
          </option>
        </select>
        <div class="select-icon glyphicon glyphicon-chevron-down"></div>
      </div>
      <div *ngIf="info.TvHeadend && TvHeadendLoading">
        <span class="fa fa-spinner fa-spin fa-2x"></span>
      </div>
    </div>
    <div class="row">
      <button class="btn btn-default" [ngClass]="{'btn-danger': (getNrOfChangedSettings() > 0)}" (click)="resetSettings()" [disabled]="loading"><span class="glyphicon glyphicon-step-backward"></span> Reset</button>
      <button class="btn btn-default" [ngClass]="{'btn-success': (getNrOfChangedSettings() > 0)}" (click)="saveSettings()" [disabled]="loading"><span class="glyphicon glyphicon-floppy-disk"></span> Save</button>
      <div class="changes"><span>({{getNrOfChangedSettings()}} changes)</span></div>
    </div>
  </div>
</div>
